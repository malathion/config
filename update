#!/usr/bin/bash
# 
# don't type passwords a bunch of times. we are lazy.
# 
if [[ $(ssh-add -L) == "The agent has no identities." ]]; then
    if [[ $(type -p cowsay) ]]; then
        cowsay "Identify yourself."
    else
        echo "Identify yourself."
    fi
    ssh-add -t 12h ${HOME}/.ssh/id_rsa
fi

# 
# now that we have ssh kanged up, upload our crap
# 
git add .
git status
confirm || exit 1
git commit -m "$(curl -s http://whatthecommit.com/index.txt)"
git pull
git push
